
<div class="panel">
    <div class="assignment" *ngIf="assignment" [ngClass]="'level-' + assignment.level">
        <div class="title">{{assignment.title}}</div>
        <p>
            {{assignment.description}}
        </p>
        <div class="points tooltip-container" [ngClass]="{'complete': submission.statusId == 1}">
            <span *ngIf="!assignment.mySubmission">{{assignment.points}}</span>
            <span *ngIf="assignment.mySubmission" class="glyphicon glyphicon-ok" aria-hidden="true"></span>
        </div>
        </div>

        <div class="assignment" *ngIf="!assignment" >
        <wd-spinner></wd-spinner>
    </div>

    <div class="datab" *ngIf="submission">
        <div>
            <textarea [(ngModel)]="submission.query" [disabled]="submission.assignmentToken" ></textarea>
            <div  *ngIf="!submission.assignmentToken">
                <button class="btn btn-default btn-raised" (click)="submit()">Submit</button>
            </div>  
        </div>
        <div *ngIf="submission.statusId == 1">
            <div class="alert alert-dismissible alert-success" *ngIf="!submission.hide">
                <button type="button" class="close" (click)="submission.hide = true">×</button>
                <strong>Well done!</strong> 
                <p>You completed this assignment on {{submission.timestamp | date:'shortDate'}}</p>
            </div>
        </div>
        <div *ngIf="submission.statusId == 3" >
            <div class="alert alert-dismissible alert-danger" *ngIf="submission.message" >
                <button type="button" class="close" (click)="submission.message = null">×</button>
                <strong>Oh snap!</strong> <p>{{submission.message}}. </p>
                <p>Change a few things up and try submitting again.</p>
                
            </div>
        </div>
        <div class="loader" *ngIf="submission.statusId == 0">
            <wd-spinner class="spinner"></wd-spinner>
        </div>
    </div>
     
     <div class="datab" *ngIf="!submission">
        Loading submission
     </div>
</div>
